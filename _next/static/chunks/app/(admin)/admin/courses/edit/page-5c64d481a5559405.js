(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6703],{7886:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>n,TN:()=>o,XL:()=>d});var r=a(2432),t=a(80364),i=a(46992),c=a(84963);let l=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=t.forwardRef((e,s)=>{let{className:a,variant:t,...i}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,c.cn)(l({variant:t}),a),...i})});n.displayName="Alert";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h5",{ref:s,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",a),...t})});d.displayName="AlertTitle";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",a),...t})});o.displayName="AlertDescription"},17398:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var r=a(2432),t=a(80364),i=a(39262),c=a(33491),l=a(3191),n=a(83702),d=a(55009),o=a(62121),h=a(94314),m=a(63844),u=a(95470),p=a(92260),x=a(15117),g=a(2708),j=a(77382),y=a(87304),v=a(22438),f=a(96446),N=a(41969),b=a(45092),k=a(7960),w=a(7886),C=a(37800),_=a(82890),S=a(56861),A=a(54889),T=a(40208);let P=e=>{let{currentStep:s,totalSteps:a}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8 relative",children:[(0,r.jsx)("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-gray-200 -translate-y-1/2 z-0"}),Array.from({length:a}).map((e,a)=>(0,r.jsx)("div",{className:"flex items-center relative z-10",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-10 w-10 rounded-full ".concat(a<s?"bg-primary text-white":a===s?"bg-primary-light text-secondary border-2 border-primary":"bg-gray-100 text-gray-400 border border-gray-300"),children:a<s?(0,r.jsx)(c.A,{className:"h-5 w-5"}):(0,r.jsx)("span",{children:a+1})})},a))]})},F=e=>{var s;let{formData:a,setFormData:i}=e,[c,h]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(async()=>{try{let e=await (0,_.DN)();h(e||[])}catch(e){console.error("Failed to fetch instructors:",e),h([])}})()},[]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zp,{className:"border-0 bg-white",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-xl font-heading",children:"Course Information"}),(0,r.jsx)(j.BT,{children:"Basic details about the course"})]}),(0,r.jsxs)(j.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"title",children:"Course Title"}),(0,r.jsx)(y.p,{id:"title",placeholder:"e.g., Super Memory Course",value:a.title||"",onChange:e=>i({...a,title:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"instructor",children:"Instructor"}),(0,r.jsxs)(b.l6,{value:(null===(s=a.instructor_id)||void 0===s?void 0:s.toString())||"",onValueChange:e=>i({...a,instructor_id:Number.parseInt(e)}),children:[(0,r.jsx)(b.bq,{children:(0,r.jsx)(b.yv,{placeholder:"Select an instructor"})}),(0,r.jsx)(b.gC,{children:c.map(e=>(0,r.jsx)(b.eb,{value:e.id.toString(),children:e.name},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"description",children:"Short Description"}),(0,r.jsx)(y.p,{id:"description",placeholder:"Brief description (1-2 sentences)",value:a.description||"",onChange:e=>i({...a,description:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"summary",children:"Detailed Summary"}),(0,r.jsx)(f.T,{id:"summary",placeholder:"Detailed information about the course",rows:5,value:a.summary||"",onChange:e=>i({...a,summary:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"base_price",children:"Base Price (MYR)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 h-4 w-4"}),(0,r.jsx)(y.p,{id:"base_price",type:"number",className:"pl-10",placeholder:"0",value:a.price||"",onChange:e=>i({...a,price:Number.parseFloat(e.target.value)||0})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{children:"Course Features"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(a.features||[]).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.p,{value:e,onChange:e=>{let r=[...a.features];r[s]=e.target.value,i({...a,features:r})},placeholder:"Feature ".concat(s+1)}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{let e=a.features.filter((e,a)=>a!==s);i({...a,features:e})},children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]},s)),(0,r.jsxs)(g.$,{variant:"outline",className:"flex items-center justify-center gap-2",onClick:()=>{let e=[...a.features||[],""];i({...a,features:e})},children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Add Feature"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{children:"Course Audiences"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(a.audiences||[]).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.p,{value:e,onChange:e=>{let r=[...a.audiences];r[s]=e.target.value,i({...a,audiences:r})},placeholder:"Audience ".concat(s+1)}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{let e=a.audiences.filter((e,a)=>a!==s);i({...a,audiences:e})},children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]},s)),(0,r.jsxs)(g.$,{variant:"outline",className:"flex items-center justify-center gap-2",onClick:()=>{let e=[...a.audiences||[],""];i({...a,audiences:e})},children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Add Audience"]})]})]})]})]}),(0,r.jsx)(j.Zp,{className:"border-0 bg-gradient-to-br from-secondary-light to-blue-100",children:(0,r.jsx)(j.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-white bg-opacity-50 rounded-full p-2",children:(0,r.jsx)(o.A,{className:"h-5 w-5 text-secondary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Course Basics"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"This information will be displayed on the course listing page and detail page. Make sure to provide accurate and compelling information to attract students."})]})]})})})]})},I=e=>{let{formData:s,setFormData:a,params:t}=e,i=(e,r,t)=>{let i=[...s.packages||[]];i[e]={...i[e],[r]:t},a({...s,packages:i})},c=e=>{let r=s.packages.filter((s,a)=>a!==e);a({...s,packages:r})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zp,{className:"border-0 bg-white",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-xl font-heading",children:"Course Packages"}),(0,r.jsx)(j.BT,{children:"Define different delivery options for this course"})]}),(0,r.jsxs)(j.Wu,{className:"space-y-6",children:[(s.packages||[]).map((e,s)=>(0,r.jsxs)(j.Zp,{className:"border border-gray-200 ".concat(s%2==0?"bg-gray-50":"bg-white"),children:[(0,r.jsx)(j.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(j.ZB,{className:"text-lg",children:["Package ",s+1]}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>c(s),children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-red-500"})})]})}),(0,r.jsxs)(j.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"package-title-".concat(s),children:"Package Title"}),(0,r.jsx)(y.p,{id:"package-title-".concat(s),placeholder:"e.g., Hybrid Course",value:e.name||"",onChange:e=>i(s,"name",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"delivery-mode-".concat(s),children:"Delivery Mode"}),(0,r.jsxs)(b.l6,{value:e.delivery_mode||"hybrid",onValueChange:e=>i(s,"delivery_mode",e),children:[(0,r.jsx)(b.bq,{id:"delivery-mode-".concat(s),children:(0,r.jsx)(b.yv,{placeholder:"Select delivery mode"})}),(0,r.jsxs)(b.gC,{children:[(0,r.jsx)(b.eb,{value:"hybrid",children:"Hybrid (Online + Offline)"}),(0,r.jsx)(b.eb,{value:"online",children:"Online Only"}),(0,r.jsx)(b.eb,{value:"offline",children:"Offline Only"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"package-desc-".concat(s),children:"Description"}),(0,r.jsx)(f.T,{id:"package-desc-".concat(s),placeholder:"e.g., 2 days offline + 4 online classes (once a week) + 1 day offline",value:e.description||"",onChange:e=>i(s,"description",e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"base-price-".concat(s),children:"Base Price (MYR)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 h-4 w-4"}),(0,r.jsx)(y.p,{id:"base-price-".concat(s),type:"number",className:"pl-10",placeholder:"0",value:e.price||"",onChange:e=>i(s,"price",Number.parseFloat(e.target.value)||0)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"early-bird-".concat(s),children:"Early Bird Discount (MYR)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 h-4 w-4"}),(0,r.jsx)(y.p,{id:"early-bird-".concat(s),type:"number",className:"pl-10",placeholder:"0",value:e.discount||"",onChange:e=>i(s,"discount",Number.parseFloat(e.target.value)||0)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"discount-desc-".concat(s),children:"Discount Description"}),(0,r.jsx)(y.p,{id:"discount-desc-".concat(s),placeholder:"e.g., RM 500 off for the first 10 participants",value:e.discount_description||"",onChange:e=>i(s,"discount_description",e.target.value)}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Brief description of the discount offer"})]})]})]})]},s)),(0,r.jsxs)(g.$,{variant:"outline",className:"w-full py-6 border-dashed border-2",onClick:()=>{let e=[...s.packages||[],{id:Date.now(),name:"",description:"",course_id:Number.parseInt(t.get("id")||"0"),price:0,discount:0,discount_description:"",delivery_mode:"hybrid"}];a({...s,packages:e})},children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Add Package"]})]})]}),(0,r.jsx)(j.Zp,{className:"border-0 bg-gradient-to-br from-primary-light to-primary-medium",children:(0,r.jsx)(j.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-white bg-opacity-50 rounded-full p-2",children:(0,r.jsx)(o.A,{className:"h-5 w-5 text-secondary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Package Options"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Create different package options for your course. Each package can have its own pricing, delivery mode, and early bird discount. Students will be able to choose from these packages during enrollment."})]})]})})})]})},B=e=>{var s,a,i;let{formData:c,setFormData:m}=e,[u,p]=(0,t.useState)(""),x=e=>{let s=c.packages.findIndex(s=>s.id.toString()===e);if(-1===s)return;let a=[...c.packages];a[s].classes||(a[s].classes=[]),a[s].classes.push({id:Date.now(),title:"",description:"",price:0,duration:0,class_type:"online",level_name:"basic",sequence_order:a[s].classes.length+1,agenda:[]}),m({...c,packages:a})},N=(e,s,a,r)=>{let t=c.packages.findIndex(s=>s.id.toString()===e);if(-1===t)return;let i=[...c.packages];i[t].classes[s]={...i[t].classes[s],[a]:r},m({...c,packages:i})},w=(e,s)=>{let a=c.packages.findIndex(s=>s.id.toString()===e);if(-1===a)return;let r=[...c.packages];r[a].classes=r[a].classes.filter((e,a)=>a!==s),r[a].classes.forEach((e,s)=>{e.sequence_order=s+1}),m({...c,packages:r})};return!u&&c.packages&&c.packages.length>0&&p(c.packages[0].id.toString()),null===(s=c.packages)||void 0===s||s.find(e=>e.id.toString()===u),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zp,{className:"border-0 bg-white",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-xl font-heading",children:"Class Structure"}),(0,r.jsx)(j.BT,{children:"Define classes for each package"})]}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)(k.Tabs,{value:u,onValueChange:p,className:"w-full",children:[(0,r.jsx)(k.TabsList,{className:"mb-6 bg-gray-100 w-full justify-start overflow-x-auto",children:null===(a=c.packages)||void 0===a?void 0:a.map(e=>(0,r.jsx)(k.TabsTrigger,{value:e.id.toString(),className:"flex-shrink-0",children:e.title||"Package ".concat(c.packages.indexOf(e)+1)},e.id))}),null===(i=c.packages)||void 0===i?void 0:i.map(e=>(0,r.jsxs)(k.a,{value:e.id.toString(),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:e.title||"Package ".concat(c.packages.indexOf(e)+1)}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(e.classes||[]).map((s,a)=>(0,r.jsx)(j.Zp,{className:"border border-gray-200",children:(0,r.jsx)(j.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center h-8 w-8 bg-gray-100 rounded-full text-gray-500",children:(0,r.jsx)(h.A,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Class ",s.sequence_order]})]}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>w(e.id.toString(),a),children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-red-500"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-title-".concat(e.id,"-").concat(a),children:"Class Title"}),(0,r.jsx)(y.p,{id:"class-title-".concat(e.id,"-").concat(a),placeholder:"e.g., Introduction to Memory Techniques",value:s.title||"",onChange:s=>N(e.id.toString(),a,"title",s.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-type-".concat(e.id,"-").concat(a),children:"Class Type"}),(0,r.jsxs)(b.l6,{value:s.class_type||"online",onValueChange:s=>N(e.id.toString(),a,"class_type",s),children:[(0,r.jsx)(b.bq,{id:"class-type-".concat(e.id,"-").concat(a),children:(0,r.jsx)(b.yv,{placeholder:"Select class type"})}),(0,r.jsxs)(b.gC,{children:[(0,r.jsx)(b.eb,{value:"online",children:"Online"}),(0,r.jsx)(b.eb,{value:"physical",children:"Physical"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-level-".concat(e.id,"-").concat(a),children:"Level"}),(0,r.jsxs)(b.l6,{value:s.level_name||"basic",onValueChange:s=>N(e.id.toString(),a,"level_name",s),children:[(0,r.jsx)(b.bq,{id:"class-level-".concat(e.id,"-").concat(a),children:(0,r.jsx)(b.yv,{placeholder:"Select level"})}),(0,r.jsxs)(b.gC,{children:[(0,r.jsx)(b.eb,{value:"basic",children:"Basic"}),(0,r.jsx)(b.eb,{value:"intermediate",children:"Intermediate"}),(0,r.jsx)(b.eb,{value:"advance",children:"Advance"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-description-".concat(e.id,"-").concat(a),children:"Description"}),(0,r.jsx)(f.T,{id:"class-description-".concat(e.id,"-").concat(a),placeholder:"Brief description of what will be covered in this class",rows:2,value:s.description||"",onChange:s=>N(e.id.toString(),a,"description",s.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-price-".concat(e.id,"-").concat(a),children:"Price (MYR)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 h-4 w-4"}),(0,r.jsx)(y.p,{id:"class-price-".concat(e.id,"-").concat(a),type:"number",step:"0.01",className:"pl-10",placeholder:"0.00",value:s.price||"",onChange:s=>N(e.id.toString(),a,"price",Number.parseFloat(s.target.value)||0)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-duration-".concat(e.id,"-").concat(a),children:"Duration (minutes)"}),(0,r.jsx)(y.p,{id:"class-duration-".concat(e.id,"-").concat(a),type:"number",placeholder:"90",value:s.duration||"",onChange:s=>N(e.id.toString(),a,"duration",Number.parseInt(s.target.value)||0)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"class-order-".concat(e.id,"-").concat(a),children:"Sequence Order"}),(0,r.jsx)(y.p,{id:"class-order-".concat(e.id,"-").concat(a),type:"number",min:"1",value:s.sequence_order||a+1,onChange:s=>N(e.id.toString(),a,"sequence_order",Number.parseInt(s.target.value)||a+1)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{children:"Class Agenda"}),(0,r.jsxs)("div",{className:"space-y-2",children:[Array.isArray(s.agenda)?s.agenda.map((t,i)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.p,{value:t,onChange:r=>{let t=[...Array.isArray(s.agenda)?s.agenda:[]];t[i]=r.target.value,N(e.id.toString(),a,"agenda",t)},placeholder:"Agenda item ".concat(i+1)}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>{let r=(Array.isArray(s.agenda)?s.agenda:[]).filter((e,s)=>s!==i);N(e.id.toString(),a,"agenda",r)},children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]},i)):null,(0,r.jsxs)(g.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{let r=[...Array.isArray(s.agenda)?s.agenda:[],""];N(e.id.toString(),a,"agenda",r)},children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Add Agenda Item"]})]})]})]})})},s.id)),(0,r.jsxs)(g.$,{variant:"outline",className:"w-full py-4 border-dashed border-2",onClick:()=>x(e.id.toString()),children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Add Class"]})]})]},e.id))]})})]}),(0,r.jsx)(j.Zp,{className:"border-0 bg-gradient-to-br from-green-50 to-green-100",children:(0,r.jsx)(j.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-white bg-opacity-50 rounded-full p-2",children:(0,r.jsx)(o.A,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Class Structure"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Define the individual classes or sessions for each package. You can set different prices for each class. The sequence order determines the order in which classes are displayed to students."})]})]})})})]})},D=e=>{let{formData:s}=e,a=e=>new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0}).format(e);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(j.Zp,{className:"border-0 bg-white",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-xl font-heading",children:"Course Summary"}),(0,r.jsx)(j.BT,{children:"Review your course details before publishing"})]}),(0,r.jsxs)(j.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Course Title"}),(0,r.jsx)("p",{className:"font-medium",children:s.title||"Not specified"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Base Price"}),(0,r.jsx)("p",{className:"font-medium",children:s.price?a(s.price):"Not specified"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Description"}),(0,r.jsx)("p",{children:s.description||"Not specified"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Summary"}),(0,r.jsx)("p",{children:s.summary||"Not specified"})]}),s.features&&s.features.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Features"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:s.features.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),s.audiences&&s.audiences.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Target Audiences"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:s.audiences.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]})]}),(0,r.jsx)(N.Separator,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Packages"}),s.packages&&s.packages.length>0?(0,r.jsx)("div",{className:"space-y-6",children:s.packages.map((e,s)=>(0,r.jsxs)(j.Zp,{className:"border border-gray-200 ".concat(s%2==0?"bg-gray-50":"bg-white"),children:[(0,r.jsxs)(j.aR,{className:"pb-2",children:[(0,r.jsx)(j.ZB,{className:"text-lg",children:e.title||"Package ".concat(s+1)}),(0,r.jsx)(j.BT,{children:e.description})]}),(0,r.jsxs)(j.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Delivery Mode"}),(0,r.jsx)("p",{className:"font-medium capitalize",children:e.delivery_mode})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Base Price"}),(0,r.jsx)("p",{className:"font-medium",children:e.base_price?a(e.base_price):"Not specified"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Early Bird Discount"}),(0,r.jsxs)("p",{className:"font-medium",children:[e.early_bird_discount?a(e.early_bird_discount):"None",e.early_bird_limit?" (first ".concat(e.early_bird_limit," students)"):""]})]})]}),e.classes&&e.classes.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Classes"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-600",children:"#"}),(0,r.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-600",children:"Name"}),(0,r.jsx)("th",{className:"text-left py-2 px-4 font-medium text-gray-600",children:"Description"}),(0,r.jsx)("th",{className:"text-right py-2 px-4 font-medium text-gray-600",children:"Price"})]})}),(0,r.jsx)("tbody",{children:e.classes.map((e,s)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:e.sequence_order}),(0,r.jsx)("td",{className:"py-2 px-4",children:e.title||"Not specified"}),(0,r.jsx)("td",{className:"py-2 px-4",children:e.description||"Not specified"}),(0,r.jsx)("td",{className:"py-2 px-4 text-right",children:e.price?a(e.price):"Not specified"})]},s))})]})})]})]})]},s))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No packages defined"})]})]})]}),(0,r.jsx)(j.Zp,{className:"border-0 bg-gradient-to-br from-secondary-light to-blue-100",children:(0,r.jsx)(j.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-white bg-opacity-50 rounded-full p-2",children:(0,r.jsx)(o.A,{className:"h-5 w-5 text-secondary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Ready to Update?"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Review all the information carefully before updating. These changes will be reflected immediately on the course page. Students who have already enrolled will not be affected by price changes."})]})]})})})]})};function E(){let e=(0,i.useRouter)(),s=(0,i.useSearchParams)(),{toast:a}=(0,T.dj)(),[l,n]=(0,t.useState)(0),[d,o]=(0,t.useState)(!0),[h,j]=(0,t.useState)({id:null,title:"",description:"",summary:"",price:0,instructor_id:"",features:[],audiences:[],packages:[]}),[y,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let r=Number.parseInt(s.get("id")||"0");(async()=>{o(!0);try{let s=await (0,C.YG)(r);if(!s){e.push("/admin/courses/list");return}let a=await (0,S.FJ)(r),t=Array.isArray(a)?a:[],i=await Promise.all(t.map(async e=>{let s=await (0,A.Ht)(e.id),a=Array.isArray(s)?s:[];return{...e,classes:a.sort((e,s)=>e.sequence_order-s.sequence_order)}}));j({id:s.id,title:s.title||"",description:s.description||"",summary:s.summary||"",price:s.price||0,instructor_id:s.instructor_id||"",features:s.features||[],audiences:s.audiences||[],packages:i.map(e=>({...e,name:e.name||"",description:e.description||"",price:e.price||0,discount:e.discount||0,discount_description:e.discount_description||"",delivery_mode:e.delivery_mode||"hybrid",classes:(e.classes||[]).map(e=>({...e,title:e.title||"",description:e.description||"",price:e.price||0,duration:e.duration||0,class_type:e.class_type||"online",level_name:e.level_name||"basic",sequence_order:e.sequence_order||0,agenda:Array.isArray(e.agenda)?e.agenda:e.agenda?[e.agenda]:[]}))}))})}catch(e){console.error("Error fetching course data:",e),a({title:"Error",description:"Failed to load course data. Please try again.",variant:"destructive"})}finally{o(!1)}})()},[s,e,a]),(0,t.useEffect)(()=>{d||v(!0)},[h,d]);let f=[{title:"Course Basics",component:(0,r.jsx)(F,{formData:h,setFormData:j})},{title:"Package Builder",component:(0,r.jsx)(I,{formData:h,setFormData:j,params:s})},{title:"Class Grid Builder",component:(0,r.jsx)(B,{formData:h,setFormData:j})},{title:"Review",component:(0,r.jsx)(D,{formData:h})}],N=async()=>{try{o(!0);let e={course:{id:h.id,title:h.title,description:h.description,summary:h.summary,price:h.price,instructor_id:h.instructor_id,features:h.features,audiences:h.audiences,course_packages:(h.packages||[]).map(e=>({...e,course_package_classes:e.classes||[]}))}};console.log("[course][save] Saving complete course data:",e),await (0,C.Dz)(e),a({title:"Success",description:"Course updated successfully",variant:"default",className:"bg-green-50 border-green-200 text-green-800"}),v(!1)}catch(e){console.error("Error saving course:",e),a({title:"Error",description:"Failed to save course. Please try again.",variant:"destructive"})}finally{o(!1)}},b=async()=>{try{await N(),a({title:"Success",description:"Course updated and published successfully",variant:"default",className:"bg-green-50 border-green-200 text-green-800"}),setTimeout(()=>{e.push("/admin/courses/list")},1e3)}catch(e){console.error("Error publishing course:",e),a({title:"Error",description:"Failed to publish course. Please try again.",variant:"destructive"})}};return d?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-heading mb-2",children:"Edit Course"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Update course information and structure"})]}),(0,r.jsxs)(g.$,{variant:"outline",onClick:()=>e.push("/admin/courses/list"),children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Back to Courses"]})]}),y&&(0,r.jsxs)(w.Fc,{className:"mb-6 bg-amber-50 border-amber-200",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 text-amber-600"}),(0,r.jsx)(w.XL,{className:"text-amber-800",children:"Unsaved Changes"}),(0,r.jsx)(w.TN,{className:"text-amber-700",children:"You have unsaved changes. Make sure to save your changes before leaving this page."})]}),(0,r.jsx)(P,{currentStep:l,totalSteps:f.length}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold font-heading",children:f[l].title}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Step ",l+1," of ",f.length]})]}),f[l].component,(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsx)("div",{children:l>0&&(0,r.jsxs)(g.$,{variant:"outline",onClick:()=>{l>0&&(n(l-1),window.scrollTo(0,0))},children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Previous"]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(g.$,{variant:"outline",onClick:N,disabled:d,children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"}),d?"Saving...":"Save Changes"]}),l<f.length-1?(0,r.jsxs)(g.$,{onClick:()=>{l<f.length-1&&(n(l+1),window.scrollTo(0,0))},children:["Next",(0,r.jsx)(x.A,{className:"ml-2 h-4 w-4"})]}):(0,r.jsxs)(g.$,{onClick:b,className:"bg-primary hover:bg-primary-dark",children:["Update Course",(0,r.jsx)(c.A,{className:"ml-2 h-4 w-4"})]})]})]})]})}},17912:(e,s,a)=>{Promise.resolve().then(a.bind(a,17398))},40208:(e,s,a)=>{"use strict";a.d(s,{dj:()=>m});var r=a(80364);let t=0,i=new Map,c=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?c(a):e.toasts.forEach(e=>{c(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},n=[],d={toasts:[]};function o(e){d=l(d,e),n.forEach(e=>{e(d)})}function h(e){let{...s}=e,a=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,s]=r.useState(d);return r.useEffect(()=>(n.push(s),()=>{let e=n.indexOf(s);e>-1&&n.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},54889:(e,s,a)=>{"use strict";a.d(s,{Ht:()=>t,Zc:()=>i});var r=a(15616);async function t(e){console.log("[api] getClassesByPackageId called with packageId:",e);try{let s=await (0,r.P)("course_package_classes",{course_package_id:e});return console.log("[api] getClassesByPackageId returning:",s),s}catch(e){return console.error("[api] getClassesByPackageId error:",e),[]}}async function i(e){console.log("[api] getClassById called with id:",e);try{let s=await (0,r.P)("course_package_classes/".concat(e));return console.log("[api] getClassById returning:",s),s}catch(e){return console.error("[api] getClassById error:",e),null}}},56861:(e,s,a)=>{"use strict";a.d(s,{$f:()=>i,FJ:()=>t,Xi:()=>c});var r=a(15616);async function t(e){console.log("[api] getPackagesByCourseId called with courseId:",e);try{let s="?"+new URLSearchParams(Object.entries({course_id:e}).reduce((e,s)=>{let[a,r]=s;return null!=r&&(e[a]=String(r)),e},{})).toString(),a="".concat("http://worldmind.api/api","/services/course_packages").concat(s);console.log("[api] Full URL for getPackagesByCourseId:",a);{let e=localStorage.getItem("login_info");if(console.log("[api] Login info exists:",!!e),e){let s=JSON.parse(e);console.log("[api] Token exists:",!!(null==s?void 0:s.token))}}let t=await (0,r.P)("course_packages",{course_id:e});return console.log("[api] getPackagesByCourseId returning:",t),t}catch(e){return console.error("[api] getPackagesByCourseId error:",e),[]}}async function i(e){console.log("[api] getPackageById called with id:",e);try{let s=await (0,r.P)("course_packages/".concat(e));return console.log("[api] getPackageById returning:",s),s}catch(e){return console.error("[api] getPackageById error:",e),null}}async function c(){console.log("[api] getCoursePackages called");try{let e=await (0,r.P)("course_packages");return console.log("[api] getCoursePackages returning:",e),e}catch(e){return console.error("[api] getCoursePackages error:",e),[]}}},95470:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(4168).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[3438,5281,7419,2092,978,6039,5616,7021,5022,5575,7358],()=>s(17912)),_N_E=e.O()}]);