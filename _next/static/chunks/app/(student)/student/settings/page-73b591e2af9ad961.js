(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1449],{2708:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>o});var r=s(2432),n=s(80364),a=s(89932),l=s(46992),i=s(84963);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:d=!1,...u}=e,c=d?a.DX:"button";return(0,r.jsx)(c,{className:(0,i.cn)(o({variant:n,size:l,className:s})),ref:t,...u})});d.displayName="Button"},4168:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(80364);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:u,iconNode:c,...p}=e;return(0,r.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:s,strokeWidth:o?24*Number(i)/Number(n):i,className:a("lucide",d),...p},[...c.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),o=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{className:o,...d}=s;return(0,r.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(n(e)),o),...d})});return s.displayName="".concat(e),s}},16107:(e,t,s)=>{"use strict";s.d(t,{Kp:()=>i,Xx:()=>a,h5:()=>l,kh:()=>o,mt:()=>n});var r=s(15616);let n=async()=>{try{console.log("[student_page] Fetching student settings...");let e=await (0,r.Qi)("students_page/getSettings","GET");return console.log("[student_page] Settings response:",{status:null==e?void 0:e.status,hasUser:!!(null==e?void 0:e.user),hasStudent:!!(null==e?void 0:e.student)}),e}catch(e){throw console.error("[student_page] Error fetching settings:",e),e}},a=async(e,t)=>{try{console.log("[student_page] Updating student settings...");let s=await (0,r.Qi)("students_page/updateSettings","POST",{user:e,student:t});return console.log("[student_page] Update settings response:",{status:null==s?void 0:s.status}),s}catch(e){throw console.error("[student_page] Error updating settings:",e),e}};async function l(){try{var e;console.log("[student_page] Fetching all class sessions...");let t=await (0,r.Qi)("students_page/getAllClassSessions","GET");if(console.log("[student_page] All class sessions response:",{status:null==t?void 0:t.status,sessionsCount:(null==t?void 0:null===(e=t.class_sessions)||void 0===e?void 0:e.length)||0}),"OK"===t.status&&t.class_sessions)return{status:t.status,class_sessions:t.class_sessions};throw Error("Invalid response format or class sessions not found")}catch(e){throw console.error("[student_page] Error fetching all class sessions:",e),e}}async function i(e){try{var t;console.log("[student_page] Fetching class sessions...");let s=await (0,r.Qi)("students_page/getClassSessionDetail/"+e,"GET");if(console.log("[student_page] class session detail response:",{status:null==s?void 0:s.status,sessionsCount:(null==s?void 0:null===(t=s.class_session)||void 0===t?void 0:t.length)||0}),"OK"===s.status&&s.class_session)return[s.class_session];return[]}catch(e){throw console.error("[student_page] Error fetching class session detail:",e),e}}async function o(){try{console.log("[student_page] Fetching getCoursesProgress...");let e=await (0,r.Qi)("students_page/getCoursesProgress","GET");return console.log("[student_page] getCoursesProgress response:",{status:null==e?void 0:e.status}),e}catch(e){throw console.error("[student_page] Error fetching class session detail:",e),e}}},21283:(e,t,s)=>{"use strict";s.d(t,{dj:()=>p});var r=s(80364);let n=0,a=new Map,l=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function u(e){d=i(d,e),o.forEach(e=>{e(d)})}function c(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},22438:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(2432),n=s(80364),a=s(86673),l=s(46992),i=s(84963);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.b,{ref:t,className:(0,i.cn)(o(),s),...n})});d.displayName=a.b.displayName},39262:(e,t,s)=>{"use strict";var r=s(66834);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},41969:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>i});var r=s(2432),n=s(80364),a=s(52898),l=s(84963);let i=n.forwardRef((e,t)=>{let{className:s,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(a.b,{ref:t,decorative:i,orientation:n,className:(0,l.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=a.b.displayName},46992:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});var r=s(12126);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.$,l=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],r=null==i?void 0:i[e];if(null===t)return null;let a=n(t)||n(r);return l[e][a]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return a(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...d}[t]):({...i,...d})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},49948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(2432),n=s(80364),a=s(39262),l=s(77382),i=s(2708),o=s(87304),d=s(22438),u=s(41969),c=s(21283),p=s(16107),f=s(83881);let g=e=>{if(!e)return{score:0,label:"",color:""};let t=0,s={length:e.length>=12,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),specialChars:(e.match(/[!@#$%^&*(),.?":{}|<>]/g)||[]).length>=3};return(s.length&&(t+=20),s.lowercase&&(t+=20),s.uppercase&&(t+=20),s.numbers&&(t+=20),s.specialChars&&(t+=20),t<40)?{score:t,label:"Weak",color:"bg-red-500"}:t<60?{score:t,label:"Fair",color:"bg-orange-500"}:t<80?{score:t,label:"Good",color:"bg-yellow-500"}:t<100?{score:t,label:"Strong",color:"bg-blue-500"}:{score:t,label:"Very Strong",color:"bg-green-500"}};function m(){let e=(0,a.useRouter)(),{toast:t}=(0,c.dj)(),[s,m]=(0,n.useState)(!0),[h,v]=(0,n.useState)(!1),[x,y]=(0,n.useState)(null),[b,w]=(0,n.useState)(null),[j,N]=(0,n.useState)(null),[S,_]=(0,n.useState)(""),[E,C]=(0,n.useState)(""),[A,T]=(0,n.useState)(""),[P,R]=(0,n.useState)({score:0,label:"",color:""});(0,n.useEffect)(()=>{!async function(){try{m(!0),y(null);let e=await (0,p.mt)();console.log("[settings] Fetched settings:",{status:e.status,user:e.user?{id:e.user.id,name:e.user.name}:null,student:e.student?{id:e.student.id,name:e.student.name}:null}),"OK"===e.status&&e.user&&e.student?(w(e.user),N(e.student),_(e.user.name||"")):y("Failed to load settings. Please try again.")}catch(e){console.error("[settings] Error fetching settings:",e),y("An error occurred while loading your settings. Please try again.")}finally{m(!1)}}()},[]);let O=async e=>{if(e.preventDefault(),!S.trim()){t({title:"Error",description:"Name is required",variant:"destructive"});return}if(E&&E!==A){t({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(E&&P.score<100){t({title:"Error",description:"Password does not meet all requirements",variant:"destructive"});return}try{v(!0);let e={...b,name:S.trim(),...E?{password:E}:{}},s={...j,name:S.trim()};console.log("[settings] Updating settings:",{user:{id:e.id,name:e.name},student:{id:s.id,name:s.name}});let r=await (0,p.Xx)(e,s);if(r&&"OK"===r.status)t({title:"Success",description:"Your settings have been updated"}),w(e),N(s),C(""),T("");else throw Error("Failed to update settings")}catch(e){console.error("[settings] Error updating settings:",e),t({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}finally{v(!1)}};return s?(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-[400px]",children:[(0,r.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,r.jsx)("span",{className:"ml-2",children:"Loading settings..."})]}):x?(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Error"}),(0,r.jsx)(l.BT,{children:"Failed to load settings"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("p",{children:x})}),(0,r.jsx)(l.wL,{children:(0,r.jsx)(i.$,{onClick:()=>e.refresh(),children:"Try Again"})})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Account Settings"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Manage your account settings and preferences"})]}),(0,r.jsx)("form",{onSubmit:O,children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Personal Information"}),(0,r.jsx)(l.BT,{children:"Update your personal details"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"name",children:"Name"}),(0,r.jsx)(o.p,{id:"name",value:S,onChange:e=>_(e.target.value),placeholder:"Your name",disabled:h}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"This will update your name across the platform"})]}),(0,r.jsx)(u.Separator,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"password",children:"New Password"}),(0,r.jsx)(o.p,{id:"password",type:"password",value:E,onChange:e=>{C(e.target.value),R(g(e.target.value))},placeholder:"Leave blank to keep current password",disabled:h}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsx)("p",{children:"Password requirements:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[(0,r.jsx)("li",{children:"Minimum 12 characters"}),(0,r.jsx)("li",{children:"Include uppercase and lowercase letters"}),(0,r.jsx)("li",{children:"Include at least one number"}),(0,r.jsxs)("li",{children:['Include at least 3 special characters: !@#$%^&*(),.?":',"|<>"]})]})]}),E&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,r.jsx)("span",{children:"Password strength:"}),(0,r.jsx)("span",{className:"font-medium ".concat(P.score<40?"text-red-600":P.score<60?"text-orange-600":P.score<80?"text-yellow-600":P.score<100?"text-blue-600":"text-green-600"),children:P.label})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(P.color),style:{width:"".concat(P.score,"%")}})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"repeatPassword",children:"Confirm New Password"}),(0,r.jsx)(o.p,{id:"repeatPassword",type:"password",value:A,onChange:e=>T(e.target.value),placeholder:"Confirm new password",disabled:h})]})]})]}),(0,r.jsx)(l.wL,{className:"flex justify-end",children:(0,r.jsx)(i.$,{type:"submit",disabled:h,children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})})]})}},52898:(e,t,s)=>{"use strict";s.d(t,{b:()=>d});var r=s(80364),n=s(97856),a=s(2432),l="horizontal",i=["horizontal","vertical"],o=r.forwardRef((e,t)=>{var s;let{decorative:r,orientation:o=l,...d}=e,u=(s=o,i.includes(s))?o:l;return(0,a.jsx)(n.sG.div,{"data-orientation":u,...r?{role:"none"}:{"aria-orientation":"vertical"===u?u:void 0,role:"separator"},...d,ref:t})});o.displayName="Separator";var d=o},61391:(e,t,s)=>{"use strict";s.d(t,{s:()=>l,t:()=>a});var r=s(80364);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let s=!1,r=e.map(e=>{let r=n(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():n(e[t],null)}}}}function l(...e){return r.useCallback(a(...e),e)}},77382:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>c});var r=s(2432),n=s(80364),a=s(84963);let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...n})});u.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...n})});c.displayName="CardFooter"},79699:(e,t,s)=>{Promise.resolve().then(s.bind(s,49948))},83881:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4168).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84963:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(12126),n=s(68441);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}},86673:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var r=s(80364),n=s(97856),a=s(2432),l=r.forwardRef((e,t)=>(0,a.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=l},87304:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(2432),n=s(80364),a=s(84963);let l=n.forwardRef((e,t)=>{let{className:s,type:n,...l}=e;return(0,r.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},89932:(e,t,s)=>{"use strict";s.d(t,{DX:()=>i,Dc:()=>d,TL:()=>l});var r=s(80364),n=s(61391),a=s(2432);function l(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:s,...a}=e;if(r.isValidElement(s)){var l;let e,i;let o=(l=s,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,t){let s={...t};for(let r in t){let n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...a}:"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==r.Fragment&&(d.ref=t?(0,n.t)(t,o):o),r.cloneElement(s,d)}return r.Children.count(s)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=r.forwardRef((e,s)=>{let{children:n,...l}=e,i=r.Children.toArray(n),o=i.find(u);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...l,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...l,ref:s,children:n})});return s.displayName=`${e}.Slot`,s}var i=l("Slot"),o=Symbol("radix.slottable");function d(e){let t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=o,t}function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},97856:(e,t,s)=>{"use strict";s.d(t,{hO:()=>o,sG:()=>i});var r=s(80364),n=s(24349),a=s(89932),l=s(2432),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.TL)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:n,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(n?s:t,{...a,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function o(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[3438,5616,5022,5575,7358],()=>t(79699)),_N_E=e.O()}]);