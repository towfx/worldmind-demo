(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7414],{2708:(e,s,t)=>{"use strict";t.d(s,{$:()=>i,r:()=>c});var r=t(2432),a=t(80364),n=t(89932),o=t(46992),l=t(84963);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,s)=>{let{className:t,variant:a,size:o,asChild:i=!1,...d}=e,u=i?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:o,className:t})),ref:s,...d})});i.displayName="Button"},7960:(e,s,t)=>{"use strict";t.d(s,{Tabs:()=>l,TabsList:()=>c,TabsTrigger:()=>i,a:()=>d});var r=t(2432),a=t(80364),n=t(47419),o=t(84963);let l=n.bL,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.B8,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=n.B8.displayName;let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.l9,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});i.displayName=n.l9.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.UC,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});d.displayName=n.UC.displayName},16107:(e,s,t)=>{"use strict";t.d(s,{Kp:()=>l,Xx:()=>n,h5:()=>o,kh:()=>c,mt:()=>a});var r=t(15616);let a=async()=>{try{console.log("[student_page] Fetching student settings...");let e=await (0,r.Qi)("students_page/getSettings","GET");return console.log("[student_page] Settings response:",{status:null==e?void 0:e.status,hasUser:!!(null==e?void 0:e.user),hasStudent:!!(null==e?void 0:e.student)}),e}catch(e){throw console.error("[student_page] Error fetching settings:",e),e}},n=async(e,s)=>{try{console.log("[student_page] Updating student settings...");let t=await (0,r.Qi)("students_page/updateSettings","POST",{user:e,student:s});return console.log("[student_page] Update settings response:",{status:null==t?void 0:t.status}),t}catch(e){throw console.error("[student_page] Error updating settings:",e),e}};async function o(){try{var e;console.log("[student_page] Fetching all class sessions...");let s=await (0,r.Qi)("students_page/getAllClassSessions","GET");if(console.log("[student_page] All class sessions response:",{status:null==s?void 0:s.status,sessionsCount:(null==s?void 0:null===(e=s.class_sessions)||void 0===e?void 0:e.length)||0}),"OK"===s.status&&s.class_sessions)return{status:s.status,class_sessions:s.class_sessions};throw Error("Invalid response format or class sessions not found")}catch(e){throw console.error("[student_page] Error fetching all class sessions:",e),e}}async function l(e){try{var s;console.log("[student_page] Fetching class sessions...");let t=await (0,r.Qi)("students_page/getClassSessionDetail/"+e,"GET");if(console.log("[student_page] class session detail response:",{status:null==t?void 0:t.status,sessionsCount:(null==t?void 0:null===(s=t.class_session)||void 0===s?void 0:s.length)||0}),"OK"===t.status&&t.class_session)return[t.class_session];return[]}catch(e){throw console.error("[student_page] Error fetching class session detail:",e),e}}async function c(){try{console.log("[student_page] Fetching getCoursesProgress...");let e=await (0,r.Qi)("students_page/getCoursesProgress","GET");return console.log("[student_page] getCoursesProgress response:",{status:null==e?void 0:e.status}),e}catch(e){throw console.error("[student_page] Error fetching class session detail:",e),e}}},16765:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(2432);t(80364);var a=t(46992),n=t(84963);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:t}),s),...a})}},34352:(e,s,t)=>{Promise.resolve().then(t.bind(t,58719))},37271:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4168).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},37800:(e,s,t)=>{"use strict";t.d(s,{Dz:()=>c,NJ:()=>n,SA:()=>l,YG:()=>o});var r=t(15616);let a="courses",n=async()=>{console.log("[api][getCourses] Fetching all courses");try{let e=await (0,r.P)(a);if(!Array.isArray(e))return console.error("[api][getCourses] Expected array but got:",typeof e,e),[];let s=e.map(e=>{if(e.features&&"string"==typeof e.features)try{e.features=JSON.parse(e.features)}catch(s){console.error("[api][getCourses] Error parsing features for course ".concat(e.id,":"),s),e.features=[]}return e.price&&"string"==typeof e.price&&(e.price=Number.parseFloat(e.price)),e});return console.log("[api][getCourses] Fetched and processed courses:",s.length),s}catch(e){return console.error("[api][getCourses] Error fetching courses:",e),[]}},o=async e=>{console.log("[api][getCourseById] Fetching course with id:",e);try{let s=await (0,r.P)("".concat(a,"/").concat(e));if(console.log("[api][getCourseById] Raw course data:",s),s.features&&"string"==typeof s.features)try{let e=JSON.parse(s.features);console.log("[api][getCourseById] Parsed features:",e),Array.isArray(e)?s.features=e:(console.warn("[api][getCourseById] Features is not an array after parsing:",e),s.features=[])}catch(t){console.error("[api][getCourseById] Error parsing features for course ".concat(e,":"),t),s.features=[]}else Array.isArray(s.features)||(console.warn("[api][getCourseById] Features is not a string or array:",typeof s.features,s.features),s.features=[]);if(s.audiences&&"string"==typeof s.audiences)try{let e=JSON.parse(s.audiences);console.log("[api][getCourseById] Parsed audiences:",e),Array.isArray(e)?s.audiences=e:(console.warn("[api][getCourseById] Features is not an array after parsing:",e),s.audiences=[])}catch(t){console.error("[api][getCourseById] Error parsing features for course ".concat(e,":"),t),s.audiences=[]}else Array.isArray(s.audiences)||(console.warn("[api][getCourseById] Audiences is not a string or array:",typeof s.audiences,s.audiences),s.audiences=[]);return s.price&&"string"==typeof s.price&&(s.price=Number.parseFloat(s.price)),console.log("[api][getCourseById] Processed course:",{id:s.id,title:s.title,features:Array.isArray(s.features)?"Array(".concat(s.features.length,")"):typeof s.features}),s}catch(s){throw console.error("[api][getCourseById] Error fetching course with ID ".concat(e,":"),s),s}},l=async e=>{console.log("[api][createCourseData] Creating complete course data:",e);try{let s=await (0,r.Em)("courses/createCourseData","POST",e);return console.log("[api][createCourseData] Created complete course data:",{id:s.id,title:s.title}),s}catch(e){throw console.error("[api][createCourseData] Error creating complete course data:",e),e}},c=async e=>{console.log("[api][updateCourseData] Updating complete course data:",e);try{let s=await (0,r.Em)("courses/updateCourseData","PUT",e);return console.log("[api][updateCourseData] Updated complete course data:",{id:s.id,title:s.title}),s}catch(e){throw console.error("[api][updateCourseData] Error updating complete course data:",e),e}}},58719:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var r=t(2432),a=t(80364),n=t(92325),o=t(88524),l=t.n(o),c=t(77382),i=t(2708),d=t(39262),u=t(32317),m=t.n(u),g=t(56334),f=t(38452),h=t(40855),p=t(4329),x=t(67129),b=t(46155),v=t(82811),y=t(37271),N=t(70677),w=t(94010),j=t(16765),C=t(7960),k=t(92105),E=t(87759),_=t(16107),A=t(37800),S=t(61285);t(70333);let D=(0,n.ye)(l());function T(){let{t:e}=(0,k.Bd)(),s=(0,d.useRouter)(),[t,o]=(0,a.useState)(n.Pp.MONTH),[u,T]=(0,a.useState)(new Date),[M,P]=(0,a.useState)([]),[F,B]=(0,a.useState)([]),[H,I]=(0,a.useState)([]),[R,z]=(0,a.useState)([]),[O,L]=(0,a.useState)(!1),[U,$]=(0,a.useState)(!1),[V,Y]=(0,a.useState)(null),Z=(0,a.useRef)(null);(0,a.useEffect)(()=>{console.log("Getting student ID from localStorage...");let e=localStorage.getItem("login_info");if(e){let s=JSON.parse(e);console.log("Login info:",s),s.student_id&&(Y(s.student_id),console.log("Student ID set to:",s.student_id))}},[]),(0,a.useEffect)(()=>{(async()=>{try{console.log("Starting to fetch calendar data..."),console.log("Fetching class sessions...");let e=(await (0,_.h5)()).class_sessions;console.log("[calendar] Class sessions fetched:",e),console.log("Fetching courses...");let s=await (0,A.NJ)();console.log("[calendar] Courses fetched:",s);let t=[];V?(console.log("Fetching student enrollments for studentId:",V),t=await (0,S.uz)(V),console.log("[calendar] Student enrollments fetched:",t)):console.log("No student ID available, skipping enrollment fetch"),console.log("Mapping courses...");let r=s.map((e,s)=>{let t=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316"];return{id:e.id,name:e.title,color:t[e.id%t.length]}});console.log("[calendar] Mapped courses:",r),console.log("Mapping sessions to calendar events...");let a=e.map(e=>{var t,r,a,n,o,l,c,i;console.log("[calendar] Processing session:",e);let d=s.find(s=>s.id===e.course_package_id)||{title:"Unknown Course"};console.log("[calendar] Found course for session:",d);let u=(null!==(i=null===(t=e.enrollments)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0;console.log("[calendar] Student enrolled in course ".concat(e.course_package_id,":"),u);let m=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316"];e.package_class.course_package.course_id;let g=m[((null===(n=e.package_class)||void 0===n?void 0:null===(a=n.course_package)||void 0===a?void 0:null===(r=a.course)||void 0===r?void 0:r.id)||e.id)%m.length],f=new Date(e.scheduled_at),h=new Date(f.getTime()+6e4*(e.duration||60));if(console.log("[calendar] Parsed start date:",f),console.log("[calendar] Parsed end date:",h),isNaN(f.getTime())||isNaN(h.getTime()))return console.error("[calendar] Invalid date for session:",e),null;let p=e.online_meeting_link?"Online":e.offline_location||"Unknown Location";return{id:e.id,title:e.title||"Session ".concat(e.id),start:f,end:h,courseId:(null===(c=e.package_class)||void 0===c?void 0:null===(l=c.course_package)||void 0===l?void 0:null===(o=l.course)||void 0===o?void 0:o.id)||e.id,courseName:d.title,instructorId:e.instructor_id,instructorName:e.instructor_name,location:p,color:g,status:e.status,isEnrolled:u,coursePackageId:e.course_package_id}}).filter(e=>null!==e);console.log("[calendar] Mapped events:",a),P(a),B(r),I(t),console.log("[calendar] Data fetching complete. Events set to:",a)}catch(e){console.error("[calendar] Error fetching calendar data:",e)}})()},[V]);let W=M.filter(e=>{let s=0===R.length||R.includes(e.courseId),t=!O||e.isEnrolled;return s&&t});(0,a.useEffect)(()=>{console.log("[calendar] Adding calendar styles to document");let e=document.createElement("style");return e.innerHTML='\n  .calendar-container {\n    height: 100%;\n    font-family: Geist, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n  }\n  \n  /* Header styling */\n  .rbc-header {\n    padding: 12px 3px;\n    font-weight: 600;\n    font-size: 0.875rem;\n    background-color: #f9fafb;\n    border-bottom: 1px solid #e5e7eb;\n  }\n  \n  .rbc-time-header-content .rbc-header.rbc-today {\n    background-color: rgba(59, 130, 246, 0.1);\n    color: #2563eb;\n  }\n  \n  /* View containers */\n  .rbc-time-view, .rbc-month-view {\n    border-radius: 0.5rem;\n    border: 1px solid #e5e7eb;\n    overflow: hidden;\n  }\n  \n  /* Event styling */\n  .rbc-event {\n    border-radius: 4px;\n    border: none;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n    margin: 0px !important;\n    padding: 0px !important;\n  }\n  \n  .rbc-day-slot .rbc-event {\n    border-left: 4px solid rgba(0, 0, 0, 0.15);\n  }\n  \n  .rbc-event-label {\n    font-size: 0.75rem;\n    font-weight: 500;\n  }\n  \n  .rbc-event-content {\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n  }\n  \n  /* Time grid */\n  .rbc-time-content {\n    border-top: 1px solid #f0f0f0;\n  }\n  \n  .rbc-time-header-content {\n    border-left: 1px solid #f0f0f0;\n  }\n  \n  .rbc-timeslot-group {\n    border-bottom: 1px solid #f3f4f6;\n  }\n  \n  .rbc-time-slot {\n    font-size: 0.75rem;\n  }\n  \n  /* Today highlighting */\n  .rbc-today {\n    background-color: rgba(59, 130, 246, 0.05);\n  }\n  \n  /* Off-range days */\n  .rbc-off-range-bg {\n    background: #f9fafb;\n  }\n  \n  /* Toolbar buttons */\n  .rbc-toolbar button {\n    color: #374151;\n    border: 1px solid #e5e7eb;\n    border-radius: 0.375rem;\n    padding: 0.5rem 1rem;\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n    font-weight: 500;\n    transition: all 0.2s ease;\n  }\n  \n  .rbc-toolbar button:hover {\n    background-color: #f9fafb;\n    border-color: #d1d5db;\n  }\n  \n  .rbc-toolbar button.rbc-active {\n    background-color: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n  \n  .rbc-toolbar button.rbc-active:hover {\n    background-color: #2563eb;\n    border-color: #2563eb;\n  }\n  \n  /* Month view specific */\n  .rbc-month-view .rbc-date-cell {\n    padding: 4px 8px;\n    text-align: right;\n    font-size: 0.875rem;\n  }\n  \n  .rbc-month-view .rbc-date-cell.rbc-now {\n    font-weight: 600;\n    color: #2563eb;\n  }\n  \n  .rbc-row-segment {\n    padding: 2px 4px;\n  }\n  \n  /* Selection highlight */\n  .rbc-slot-selection {\n    background-color: rgba(59, 130, 246, 0.2);\n  }\n  \n  .rbc-selected-cell {\n    background-color: rgba(59, 130, 246, 0.1);\n  }\n  \n  /* Agenda view */\n  .rbc-agenda-view table {\n    border: 1px solid #e5e7eb;\n    border-radius: 0.5rem;\n    overflow: hidden;\n  }\n  \n  .rbc-agenda-view table thead {\n    background-color: #f9fafb;\n  }\n  \n  .rbc-agenda-view table th {\n    padding: 12px;\n    font-weight: 600;\n    font-size: 0.875rem;\n    border-bottom: 1px solid #e5e7eb;\n  }\n  \n  .rbc-agenda-view table td {\n    padding: 12px;\n    border-bottom: 1px solid #f3f4f6;\n  }\n\n  .rbc-toolbar .rbc-btn-group {\n    display: none\n  }\n  \n  /* Responsive adjustments */\n  @media (max-width: 640px) {\n    .rbc-toolbar {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 0.5rem;\n    }\n    \n    .rbc-toolbar .rbc-toolbar-label {\n      margin: 0.5rem 0;\n    }\n  }\n',document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,a.useEffect)(()=>{function e(e){Z.current&&!Z.current.contains(e.target)&&$(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Z]);let G=M.filter(e=>new Date(e.start)>new Date).sort((e,s)=>new Date(e.start).getTime()-new Date(s.start).getTime()).slice(0,3),J=F.filter(e=>H.some(s=>s.course_package_id===e.id&&"active"===s.status)).length;return console.log("[calendar] StudentCalendarPage rendering with view:",t,"date:",u,"events count:",M.length),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:e("student.calendar.title","My Calendar")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e("student.calendar.description","View all your scheduled classes and available sessions")})]})}),(0,r.jsxs)(c.Zp,{className:"shadow-sm",children:[(0,r.jsx)(c.aR,{className:"pb-3 border-b",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ZB,{className:"text-xl",children:e("student.calendar.schedule","Schedule")}),(0,r.jsx)(c.BT,{className:"text-sm",children:l()(u).format("MMMM YYYY")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.$,{variant:"outline",size:"icon",className:"h-9 w-9 bg-transparent",onClick:()=>T(l()(u).subtract(1,t===n.Pp.DAY?"day":t===n.Pp.WEEK?"week":"month").toDate()),"aria-label":"Previous",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>T(new Date),className:"h-9",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),e("student.calendar.today","Today")]}),(0,r.jsx)(i.$,{variant:"outline",size:"icon",className:"h-9 w-9 bg-transparent",onClick:()=>T(l()(u).add(1,t===n.Pp.DAY?"day":t===n.Pp.WEEK?"week":"month").toDate()),"aria-label":"Next",children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]})]})}),(0,r.jsxs)(c.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-4 gap-4",children:[(0,r.jsx)(C.Tabs,{defaultValue:n.Pp.MONTH,className:"w-full md:w-auto",onValueChange:e=>o(e),children:(0,r.jsxs)(C.TabsList,{children:[(0,r.jsxs)(C.TabsTrigger,{value:n.Pp.DAY,children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),e("student.calendar.day","Day")]}),(0,r.jsxs)(C.TabsTrigger,{value:n.Pp.WEEK,children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"}),e("student.calendar.week","Week")]}),(0,r.jsxs)(C.TabsTrigger,{value:n.Pp.MONTH,children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),e("student.calendar.month","Month")]})]})}),(0,r.jsxs)("div",{className:"relative",ref:Z,children:[(0,r.jsxs)(i.$,{variant:"outline",onClick:()=>$(!U),className:"flex items-center",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),e("student.calendar.filter","Filter"),(R.length>0||O)&&(0,r.jsx)(j.E,{className:"ml-2 bg-primary text-white",variant:"secondary",children:R.length+ +!!O})]}),U&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg z-10 border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-3 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-medium",children:e("student.calendar.filterByCourse","Filter by Course")}),R.length>0&&(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>z([]),children:e("student.calendar.clear","Clear")})]}),(0,r.jsx)("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto pr-1",children:F.map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(E.S,{id:"course-".concat(e.id),checked:R.includes(e.id),onCheckedChange:s=>{s?z(s=>[...s,e.id]):z(s=>s.filter(s=>s!==e.id))},className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),(0,r.jsxs)("label",{htmlFor:"course-".concat(e.id),className:"ml-2 text-sm text-gray-700 flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]})]},e.id))})]}),(0,r.jsx)("div",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(E.S,{id:"enrolled-only",checked:O,onCheckedChange:e=>L(!!e),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),(0,r.jsx)("label",{htmlFor:"enrolled-only",className:"ml-2 text-sm text-gray-700",children:e("student.calendar.showOnlyEnrolled","Show only enrolled courses")})]})}),(0,r.jsxs)("div",{className:"p-3 border-t border-gray-200 flex justify-between",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{z([]),L(!1)},children:e("student.calendar.clearFilters","Clear All")}),(0,r.jsx)(i.$,{size:"sm",onClick:()=>$(!1),children:e("student.calendar.apply","Apply")})]})]})]})]}),(0,r.jsx)("div",{className:"h-[700px] bg-white rounded-md overflow-auto ",children:0===M.length?(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:e("student.calendar.noEvents","No events to display")}),(0,r.jsx)("p",{className:"text-sm mt-2",children:e("student.calendar.browseCoursesPrompt","Browse courses to find available sessions")}),(0,r.jsx)(i.$,{variant:"outline",className:"mt-4 bg-transparent",onClick:()=>s.push("/courses"),children:e("student.calendar.browseCourses","Browse Courses")})]})}):(0,r.jsx)(n.Vv,{localizer:D,events:W,startAccessor:"start",endAccessor:"end",view:t,onView:e=>{console.log("[calendar] View changed to:",e),o(e)},date:u,onNavigate:e=>{console.log("[calendar] Date navigated to:",e),T(e)},selectable:!1,onSelectEvent:e=>{console.log("[calendar] Event selected:",e),s.push("/student/sessions/detail?id=".concat(e.id))},components:{event:e=>{let{event:s}=e;return console.log("[calendar] Rendering event:",s),(0,r.jsxs)("div",{className:"rounded px-2 py-1 text-white overflow-hidden text-sm transition-opacity hover:opacity-90",style:{backgroundColor:s.color},children:[(0,r.jsx)("div",{className:"font-medium truncate",children:s.title}),t!==n.Pp.MONTH&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-xs opacity-90 truncate",children:s.instructorName}),(0,r.jsx)("div",{className:"text-xs opacity-90 truncate",children:s.location}),(0,r.jsx)("div",{className:"text-xs mt-1",children:s.isEnrolled?(0,r.jsx)(j.E,{className:"bg-green-500 text-white text-xs",children:"Enrolled"}):(0,r.jsx)(j.E,{variant:"outline",className:"bg-gray-200 text-gray-700 text-xs",children:"Not Enrolled"})})]})]})}},formats:{timeGutterFormat:(e,s,t)=>t.format(e,"HH:mm",s),dayFormat:(e,s,t)=>t.format(e,"ddd DD",s),dayHeaderFormat:(e,s,t)=>t.format(e,"dddd, MMMM D",s),dayRangeHeaderFormat:(e,s,t)=>{let{start:r,end:a}=e;return"".concat(t.format(r,"MMMM D",s)," - ").concat(t.format(a,"MMMM D",s))},eventTimeRangeFormat:(e,s,t)=>{let{start:r,end:a}=e;return"".concat(t.format(r,"HH:mm",s)," - ").concat(t.format(a,"HH:mm",s))},agendaDateFormat:(e,s,t)=>t.format(e,"ddd D",s),agendaTimeFormat:(e,s,t)=>t.format(e,"HH:mm",s),agendaTimeRangeFormat:(e,s,t)=>{let{start:r,end:a}=e;return"".concat(t.format(r,"HH:mm",s)," - ").concat(t.format(a,"HH:mm",s))}},className:"calendar-container"})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)(c.Zp,{className:"col-span-1 shadow-sm",children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsxs)(c.ZB,{className:"text-sm font-medium flex items-center",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2 text-gray-500"}),e("student.calendar.legend","Legend")]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[F.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-sm",children:e.name})]},e.id)),(0,r.jsxs)("div",{className:"pt-2 mt-2 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(j.E,{className:"bg-green-500 text-white mr-2",children:"Enrolled"}),(0,r.jsx)("span",{className:"text-sm",children:"You are enrolled in this course"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.E,{variant:"outline",className:"bg-gray-200 text-gray-700 mr-2",children:"Not Enrolled"}),(0,r.jsx)("span",{className:"text-sm",children:"You are not enrolled in this course"})]})]})]})})]}),(0,r.jsxs)(c.Zp,{className:"col-span-1 md:col-span-2 lg:col-span-2 shadow-sm",children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsxs)(c.ZB,{className:"text-sm font-medium flex items-center",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2 text-gray-500"}),e("student.calendar.upcomingSessions","Upcoming Sessions")]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"space-y-3",children:G.length>0?G.map(e=>(0,r.jsxs)("div",{className:"flex items-start p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>s.push("/student/sessions/detail?id=".concat(e.id)),children:[(0,r.jsxs)("div",{className:"mr-3 text-center",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-gray-500",children:l()(e.start).format("MMM")}),(0,r.jsx)("div",{className:"text-xl font-bold",children:l()(e.start).format("DD")})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.title}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[l()(e.start).format("HH:mm")," - ",l()(e.end).format("HH:mm")]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.instructorName}),(0,r.jsx)("div",{className:"mt-2 flex items-center gap-2",children:e.isEnrolled?(0,r.jsxs)(j.E,{className:"bg-green-500 text-white",children:[(0,r.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.E,{variant:"outline",className:"bg-gray-200 text-gray-700",children:"Not Enrolled"}),(0,r.jsxs)(m(),{href:"/enroll/course/".concat(e.coursePackageId),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",children:["Enroll Now ",(0,r.jsx)(N.A,{className:"h-3 w-3 ml-1"})]})]})})]}),(0,r.jsx)(j.E,{style:{backgroundColor:e.color},className:"text-white",children:e.location})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-2 opacity-20"}),(0,r.jsx)("p",{children:e("student.calendar.noUpcomingSessions","No upcoming sessions")})]})})})]}),(0,r.jsxs)(c.Zp,{className:"col-span-1 md:col-span-2 shadow-sm",children:[(0,r.jsx)(c.aR,{className:"pb-2",children:(0,r.jsxs)(c.ZB,{className:"text-sm font-medium flex items-center",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2 text-gray-500"}),e("student.calendar.enrollmentStatus","My Enrollment Status")]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(y.A,{className:"h-5 w-5 text-green-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Enrolled Courses"})]}),(0,r.jsx)(j.E,{className:"bg-green-500 text-white",children:J})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.A,{className:"h-5 w-5 text-blue-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Available Courses"})]}),(0,r.jsx)(j.E,{variant:"outline",className:"bg-blue-50 text-blue-700",children:F.length-J})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 text-purple-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Total Sessions"})]}),(0,r.jsx)(j.E,{variant:"outline",className:"bg-purple-50 text-purple-700",children:M.length})]}),(0,r.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,r.jsxs)(i.$,{variant:"outline",className:"w-full bg-transparent",onClick:()=>s.push("/courses"),children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Browse More Courses"]})})]})})]})]})]})}},61285:(e,s,t)=>{"use strict";t.d(s,{uz:()=>a});var r=t(15616);async function a(e){console.log("[api] getCoursePackageStudents called with studentId:",e);try{let s="course_package_students";e&&(s+="?student_id=".concat(e));let t=await (0,r.P)(s);return console.log("[api] getCoursePackageStudents returning:",t),t}catch(e){throw console.error("[api] getCoursePackageStudents error:",e),e}}},70677:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4168).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},77382:(e,s,t)=>{"use strict";t.d(s,{BT:()=>i,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>l,wL:()=>u});var r=t(2432),a=t(80364),n=t(84963);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});o.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});i.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},84963:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(12126),a=t(68441);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},87759:(e,s,t)=>{"use strict";t.d(s,{S:()=>c});var r=t(2432),a=t(80364),n=t(81109),o=t(33491),l=t(84963);let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.bL,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,r.jsx)(n.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})})});c.displayName=n.bL.displayName},94010:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4168).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[1602,1769,8548,3438,1288,5281,2105,7419,2677,5616,5022,5575,7358],()=>s(34352)),_N_E=e.O()}]);