(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{27777:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var o=t(2432),a=t(80364),s=t(39262),n=t(57834);function l(){let e=(0,s.useRouter)();return(0,a.useEffect)(()=>{(async()=>{(0,n.ri)(),e.push("/auth/login")})()},[e]),(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."}),(0,o.jsx)("p",{className:"text-gray-600",children:"You are being redirected to the login page."})]})})}},39262:(e,r,t)=>{"use strict";var o=t(66834);t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},57834:(e,r,t)=>{"use strict";t.d(r,{HW:()=>g,M3:()=>u,TK:()=>c,iD:()=>i,kg:()=>l,kl:()=>s,lo:()=>n,ri:()=>d});var o=t(15616),a=t(9266);let s=async e=>(0,o.P)("users/".concat(e)),n=async e=>(0,o.P)("users",e),l=async e=>(0,o.vt)("users",e),c=async(e,r)=>(0,o.yo)("users",e,r),i=async(e,r)=>{if(console.log("[AUTH] Attempting login for:",e),"false"===a.env.NEXT_PUBLIC_USE_REMOTE_API)return console.log("[AUTH] Using mock login (remote API disabled)"),{success:!0,data:{token:"mock-token-".concat(Date.now()),name:"Mock User",email:e,user_id:"mock-user-123",roles:e.includes("admin")?["admin"]:["student"],logged_in_status:!0,loggedin_at:new Date().toISOString()}};try{let t=await (0,o.Qi)("auth/login","POST",{email:e,password:r});if(!t.success)throw Error(t.message||"Login failed. Please check your credentials.");console.log("[AUTH] Login successful:",t.data.name);let a={token:t.data.token,name:t.data.name,email:t.data.email,user_id:t.data.user_id,roles:t.data.roles,logged_in_status:t.data.logged_in_status,loggedin_at:t.data.loggedin_at};return localStorage.setItem("login_info",JSON.stringify(a)),{success:!0,data:a}}catch(e){if(console.error("[AUTH] Login failed:",e),"TypeError"!==e.name||"Failed to fetch"!==e.message)return{success:!1,message:e.message||"An error occurred during login. Please try again."};return console.log("[AUTH] Network error detected, falling back to mock login for development"),{success:!1,message:"Network error: Could not connect to the server. Please check your connection and try again."}}},u=()=>{try{let e=localStorage.getItem("login_info");if(!e)return!1;let{logged_in_status:r}=JSON.parse(e);return!!r}catch(e){return console.error("[AUTH] Error checking login status:",e),!1}},g=()=>{try{let e=localStorage.getItem("login_info");if(!e)return null;return JSON.parse(e)}catch(e){return console.error("[AUTH] Error getting current user:",e),null}},d=async()=>{try{await (0,o.Qi)("auth/logout","POST")}catch(e){console.error("[AUTH] Error during logout API call:",e)}finally{localStorage.removeItem("login_info"),localStorage.removeItem("student_info"),console.log("[AUTH] User logged out")}}},93158:(e,r,t)=>{Promise.resolve().then(t.bind(t,27777))}},e=>{var r=r=>e(e.s=r);e.O(0,[5616,5022,5575,7358],()=>r(93158)),_N_E=e.O()}]);