(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4374],{40433:(e,s,a)=>{Promise.resolve().then(a.bind(a,65732))},65732:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var t=a(2432),i=a(80364),r=a(39262),n=a(77382),l=a(2708),o=a(87304),c=a(22438),d=a(45092),u=a(21283),m=a(37520),g=a(84963);let h=m.bL,p=m.l9,x=m.ZL,v=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(m.hJ,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i,ref:s})});v.displayName=m.hJ.displayName;let f=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsxs)(x,{children:[(0,t.jsx)(v,{}),(0,t.jsx)(m.UC,{ref:s,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i})]})});f.displayName=m.UC.displayName;let j=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};j.displayName="AlertDialogHeader";let N=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};N.displayName="AlertDialogFooter";let y=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(m.hE,{ref:s,className:(0,g.cn)("text-lg font-semibold",a),...i})});y.displayName=m.hE.displayName;let k=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(m.VY,{ref:s,className:(0,g.cn)("text-sm text-muted-foreground",a),...i})});k.displayName=m.VY.displayName;let b=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(m.rc,{ref:s,className:(0,g.cn)((0,l.r)(),a),...i})});b.displayName=m.rc.displayName;let I=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(m.ZD,{ref:s,className:(0,g.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...i})});I.displayName=m.ZD.displayName;var C=a(63844),_=a(83702),E=a(13079),S=a(83881),w=a(92105),T=a(66602),F=a(9956),R=a(82890),D=a(56861),O=a(54889),q=a(92187),P=a(15616);let J=e=>{let{value:s,onChange:a,label:i,error:r}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:i,className:r?"text-destructive":"",children:i}),(0,t.jsx)(o.p,{id:i,type:"time",value:s,onChange:e=>a(e.target.value),className:r?"border-destructive":""}),r&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:r})]})},H=e=>{let{value:s,onChange:a,label:i,error:r}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:i,className:r?"text-destructive":"",children:i}),(0,t.jsx)(o.p,{id:i,type:"date",value:s,onChange:e=>a(e.target.value),className:r?"border-destructive":""}),r&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:r})]})},L=e=>{try{return new Date(e).toISOString().split("T")[0]}catch(e){return console.error("Error formatting date:",e),""}},A=e=>{try{return new Date(e).toTimeString().slice(0,5)}catch(e){return console.error("Error formatting time:",e),""}};function z(){var e,s,a;let{t:m}=(0,w.Bd)(),g=(0,r.useRouter)(),{toast:x}=(0,u.dj)(),v=Number.parseInt((0,r.useSearchParams)().get("id")||"0"),[z,B]=(0,i.useState)(null),[U,Z]=(0,i.useState)([]),[K,Q]=(0,i.useState)([]),[V,G]=(0,i.useState)([]),[M,$]=(0,i.useState)([]),[W,Y]=(0,i.useState)(!0),[X,ee]=(0,i.useState)(null),{register:es,handleSubmit:ea,control:et,watch:ei,setValue:er,reset:en,formState:{errors:el,isSubmitting:eo}}=(0,T.mN)({defaultValues:{title:"",instructorId:"",courseId:"",packageId:"",classId:"",date:"",startTime:"",duration:"90",isOnline:!0,location:"https://zoom.us/j/123456789",capacity:"20"}}),ec=ei("courseId"),ed=ei("packageId"),eu=ei("classId"),em=ei("isOnline");(0,i.useEffect)(()=>{(async()=>{Y(!0),ee(null);try{var e,s,a,t,i,r,n,l,o,c;console.log("[FETCH] Loading session data for ID:",v);let[d,u]=await Promise.all([(0,q.fM)(v.toString()),(0,R.DN)()]);console.log("[FETCH] Session response:",d),console.log("[FETCH] Instructors loaded:",u.length);let{session:m,courses:g,course_packages:h,course_package_classes:p}=d;B(m),Z(g),Q(h),$(p),G(u);let x=L(m.scheduled_at),f=A(m.scheduled_at),j=!!m.online_meeting_link,N=(null===(a=m.package_class)||void 0===a?void 0:null===(s=a.course_package)||void 0===s?void 0:null===(e=s.course_id)||void 0===e?void 0:e.toString())||"",y=(null===(r=m.package_class)||void 0===r?void 0:null===(i=r.course_package)||void 0===i?void 0:null===(t=i.id)||void 0===t?void 0:t.toString())||"",k=(null===(l=m.package_class)||void 0===l?void 0:null===(n=l.id)||void 0===n?void 0:n.toString())||"";console.log("[FETCH] Extracted IDs - courseId:",N,"packageId:",y,"classId:",k);let b={title:m.title||"",instructorId:(null===(o=m.instructor_id)||void 0===o?void 0:o.toString())||"",courseId:N,packageId:y,classId:k,date:x,startTime:f,duration:(null===(c=m.duration)||void 0===c?void 0:c.toString())||"90",isOnline:j,location:j?m.online_meeting_link||"https://zoom.us/j/123456789":m.offline_location||"Room 101",capacity:"20"};console.log("[FETCH] Form data to reset:",b),en(b)}catch(e){console.error("[ERROR] Failed to load session data:",e),ee("Failed to load session data. Please try again.")}finally{Y(!1)}})()},[v,en]),(0,i.useEffect)(()=>{(async()=>{if(ec&&!W){console.log("[FETCH] Loading packages for course:",ec);try{var e,s,a;let t=await (0,D.FJ)(Number.parseInt(ec));console.log("[FETCH] Packages loaded:",t.length),Q(t),z&&ec!==(null===(a=z.package_class)||void 0===a?void 0:null===(s=a.course_package)||void 0===s?void 0:null===(e=s.course_id)||void 0===e?void 0:e.toString())&&(er("packageId",""),er("classId",""),$([]))}catch(e){console.error("[ERROR] Failed to load course packages:",e),Q([])}}})()},[ec,er,z,W]),(0,i.useEffect)(()=>{(async()=>{if(ed&&!W)try{var e,s,a;console.log("[FETCH] Loading course package classes for package:",ed);let t=await (0,O.Ht)(Number.parseInt(ed));console.log("[FETCH] Course package classes loaded:",t.length),$(t),z&&ed!==(null===(a=z.package_class)||void 0===a?void 0:null===(s=a.course_package)||void 0===s?void 0:null===(e=s.id)||void 0===e?void 0:e.toString())&&er("classId","")}catch(e){console.error("[ERROR] Failed to load course package classes:",e),$([])}})()},[ed,er,z,W]),(0,i.useEffect)(()=>{if(eu&&!W&&z){var e,s,a;if(eu!==(null===(s=z.package_class)||void 0===s?void 0:null===(e=s.id)||void 0===e?void 0:e.toString())){let e=M.find(e=>e.id===Number.parseInt(eu));if(e&&(console.log("[PREFILL] Selected class:",e),ei("title")||er("title",e.title||""),"90"===ei("duration")&&er("duration",(null===(a=e.duration)||void 0===a?void 0:a.toString())||"90"),e.class_type)){let s="online"===e.class_type;er("isOnline",s),er("location",s?"https://zoom.us/j/123456789":"Room 101")}}}},[eu,M,er,z,W,ei]),(0,i.useEffect)(()=>{em&&"Room 101"===ei("location")?er("location","https://zoom.us/j/123456789"):em||"https://zoom.us/j/123456789"!==ei("location")||er("location","Room 101")},[em,er,ei]);let eg=async e=>{try{console.log("[SUBMIT] Updating session with data:",e);let s=new Date("".concat(e.date,"T").concat(e.startTime,":00")),a={course_package_classes_id:Number.parseInt(e.classId),instructor_id:Number.parseInt(e.instructorId),scheduled_at:(0,P.Ow)(s),duration:Number.parseInt(e.duration),status:"upcoming",online_meeting_link:e.isOnline?e.location:null,offline_location:e.isOnline?null:e.location,title:e.title};await (0,F.Ir)(v,a),x({title:"Session updated",description:"The session has been successfully updated.",variant:"success"}),g.push("/admin/calendar")}catch(e){console.error("[ERROR] Failed to update session:",e),x({title:"Update failed",description:"Failed to update the session. Please try again.",variant:"destructive"})}},eh=async()=>{try{console.log("[DELETE] Deleting session:",v),await (0,F.kG)(v),x({title:"Session deleted",description:"The session has been successfully deleted.",variant:"success"}),g.push("/admin/calendar")}catch(e){console.error("[ERROR] Failed to delete session:",e),x({title:"Delete failed",description:"Failed to delete the session. Please try again.",variant:"destructive"})}};return W?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:m("admin.sessions.loading","Loading session...")})]})}):X?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-[60vh]",children:(0,t.jsxs)(n.Zp,{className:"w-full max-w-md",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{className:"text-destructive",children:m("admin.sessions.error","Error")}),(0,t.jsx)(n.BT,{children:X})]}),(0,t.jsx)(n.wL,{children:(0,t.jsx)(l.$,{onClick:()=>g.push("/admin/calendar"),className:"w-full",children:m("admin.sessions.backToCalendar","Back to Calendar")})})]})}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>g.push("/admin/calendar"),children:(0,t.jsx)(C.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:m("admin.sessions.editTitle","Edit Session")}),(0,t.jsx)("p",{className:"text-muted-foreground",children:m("admin.sessions.editDescription","Modify the details of this session")})]})]}),(0,t.jsxs)(h,{children:[(0,t.jsx)(p,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"destructive",size:"sm",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),m("admin.sessions.delete","Delete")]})}),(0,t.jsxs)(f,{children:[(0,t.jsxs)(j,{children:[(0,t.jsx)(y,{children:m("admin.sessions.deleteConfirmTitle","Delete session?")}),(0,t.jsx)(k,{children:m("admin.sessions.deleteConfirmDescription","Are you sure you want to delete this session? This action cannot be undone.")})]}),(0,t.jsxs)(N,{children:[(0,t.jsx)(I,{children:m("admin.sessions.cancel","Cancel")}),(0,t.jsx)(b,{onClick:eh,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:m("admin.sessions.confirmDelete","Delete")})]})]})]})]}),(0,t.jsx)("form",{onSubmit:ea(eg),children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(n.Zp,{className:"lg:col-span-2",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:m("admin.sessions.basicInfo","Basic Information")}),(0,t.jsx)(n.BT,{children:m("admin.sessions.basicInfoDesc","Edit the basic details of the session")})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"instructor",className:el.instructorId?"text-destructive":"",children:m("admin.sessions.instructor","Instructor")}),(0,t.jsx)(T.xI,{name:"instructorId",control:et,rules:{required:"Instructor is required"},render:e=>{let{field:s}=e;return(0,t.jsxs)(d.l6,{onValueChange:s.onChange,value:s.value,children:[(0,t.jsx)(d.bq,{id:"instructor",className:el.instructorId?"border-destructive":"",children:(0,t.jsx)(d.yv,{placeholder:m("admin.sessions.selectInstructor","Select an instructor")})}),(0,t.jsx)(d.gC,{children:V.map(e=>(0,t.jsx)(d.eb,{value:e.id.toString(),children:e.name},e.id))})]})}}),el.instructorId&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.instructorId.message})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"course",className:el.courseId?"text-destructive":"",children:m("admin.sessions.course","Course")}),(0,t.jsx)(T.xI,{name:"courseId",control:et,rules:{required:"Course is required"},render:e=>{let{field:s}=e;return(0,t.jsxs)(d.l6,{onValueChange:s.onChange,value:s.value,children:[(0,t.jsx)(d.bq,{id:"course",className:el.courseId?"border-destructive":"",children:(0,t.jsx)(d.yv,{placeholder:m("admin.sessions.selectCourse","Select a course")})}),(0,t.jsx)(d.gC,{children:U.map(e=>(0,t.jsx)(d.eb,{value:e.id.toString(),children:e.title||e.name},e.id))})]})}}),el.courseId&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.courseId.message})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"package",className:el.packageId?"text-destructive":"",children:m("admin.sessions.package","Package")}),(0,t.jsx)(T.xI,{name:"packageId",control:et,rules:{required:"Package is required"},render:e=>{let{field:s}=e;return(0,t.jsxs)(d.l6,{onValueChange:s.onChange,value:s.value,disabled:!ec||0===K.length,children:[(0,t.jsx)(d.bq,{id:"package",className:el.packageId?"border-destructive":"",children:(0,t.jsx)(d.yv,{placeholder:ec?0===K.length?m("admin.sessions.noPackages","No packages available"):m("admin.sessions.selectPackage","Select a package"):m("admin.sessions.selectCourseFirst","Select course first")})}),(0,t.jsx)(d.gC,{children:K.map(e=>(0,t.jsx)(d.eb,{value:e.id.toString(),children:e.name},e.id))})]})}}),el.packageId&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.packageId.message})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"class",className:el.classId?"text-destructive":"",children:m("admin.sessions.class","Class")}),(0,t.jsx)(T.xI,{name:"classId",control:et,rules:{required:"Class is required"},render:e=>{let{field:s}=e;return(0,t.jsxs)(d.l6,{onValueChange:s.onChange,value:s.value,disabled:!ed||0===M.length,children:[(0,t.jsx)(d.bq,{id:"class",className:el.classId?"border-destructive":"",children:(0,t.jsx)(d.yv,{placeholder:ed?0===M.length?m("admin.sessions.noClasses","No classes available"):m("admin.sessions.selectClass","Select a class"):m("admin.sessions.selectPackageFirst","Select package first")})}),(0,t.jsx)(d.gC,{children:M.map(e=>(0,t.jsx)(d.eb,{value:e.id.toString(),children:e.title},e.id))})]})}}),el.classId&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.classId.message})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"title",className:el.title?"text-destructive":"",children:m("admin.sessions.title","Title")}),(0,t.jsx)(o.p,{id:"title",className:el.title?"border-destructive":"",placeholder:m("admin.sessions.titlePlaceholder","Session Title"),...es("title",{required:"Title is required"})}),el.title&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.title.message})]})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:m("admin.sessions.scheduleInfo","Schedule Information")}),(0,t.jsx)(n.BT,{children:m("admin.sessions.scheduleInfoDesc","Set the date and time for the session")})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsx)(T.xI,{name:"date",control:et,rules:{required:"Date is required"},render:e=>{var s;let{field:a}=e;return(0,t.jsx)(H,{label:m("admin.sessions.date","Date"),value:a.value,onChange:a.onChange,error:null===(s=el.date)||void 0===s?void 0:s.message})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(T.xI,{name:"startTime",control:et,rules:{required:"Start time is required"},render:e=>{var s;let{field:a}=e;return(0,t.jsx)(J,{label:m("admin.sessions.startTime","Start Time"),value:a.value,onChange:a.onChange,error:null===(s=el.startTime)||void 0===s?void 0:s.message})}}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"duration",className:el.duration?"text-destructive":"",children:m("admin.sessions.duration","Duration (minutes)")}),(0,t.jsx)(o.p,{id:"duration",type:"number",min:"15",step:"15",className:el.duration?"border-destructive":"",...es("duration",{required:"Duration is required",min:{value:15,message:"Duration must be at least 15 minutes"}})}),el.duration&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.duration.message})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{children:m("admin.sessions.locationType","Location Type")}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",id:"online",className:"mr-2",...es("isOnline"),value:"true",checked:!0===em,onChange:()=>er("isOnline",!0)}),(0,t.jsx)(c.J,{htmlFor:"online",className:"cursor-pointer",children:m("admin.sessions.online","Online")})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",id:"offline",className:"mr-2",...es("isOnline"),value:"false",checked:!1===em,onChange:()=>er("isOnline",!1)}),(0,t.jsx)(c.J,{htmlFor:"offline",className:"cursor-pointer",children:m("admin.sessions.inPerson","In-Person")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"location",className:el.location?"text-destructive":"",children:em?m("admin.sessions.meetingLink","Meeting Link"):m("admin.sessions.location","Location")}),(0,t.jsx)(o.p,{id:"location",className:el.location?"border-destructive":"",placeholder:em?"https://zoom.us/j/123456789":"Room 101",...es("location",{required:"Location is required"})}),el.location&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.location.message})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(c.J,{htmlFor:"capacity",className:el.capacity?"text-destructive":"",children:m("admin.sessions.capacity","Capacity")}),(0,t.jsx)(o.p,{id:"capacity",type:"number",min:"1",className:el.capacity?"border-destructive":"",...es("capacity",{required:"Capacity is required",min:{value:1,message:"Capacity must be at least 1"}})}),el.capacity&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:el.capacity.message})]}),z&&z.package_class&&(0,t.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-md flex items-start",children:[(0,t.jsx)(E.A,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-2 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-blue-700",children:[m("admin.sessions.courseInfo","Course: ")," ",null===(s=z.package_class.course_package)||void 0===s?void 0:null===(e=s.course)||void 0===e?void 0:e.title]}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[m("admin.sessions.packageInfo","Package: ")," ",null===(a=z.package_class.course_package)||void 0===a?void 0:a.name]})]})]})]}),(0,t.jsxs)(n.wL,{className:"flex justify-between",children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>g.push("/admin/calendar"),type:"button",children:m("admin.sessions.cancel","Cancel")}),(0,t.jsx)(l.$,{type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:eo,children:eo?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}),m("admin.sessions.updating","Updating...")]}):m("admin.sessions.updateSession","Update Session")})]})]})]})})]})}},92187:(e,s,a)=>{"use strict";a.d(s,{WF:()=>r,fM:()=>l,h_:()=>o,mJ:()=>c,mc:()=>n,r1:()=>i,rq:()=>d});var t=a(15616);async function i(e){try{let s=await (0,t.Qi)("admin_page/getClassSessionAttendances/".concat(e),"GET");if("OK"===s.status&&s.class_session)return s.class_session;throw Error("Invalid response format or class session not found")}catch(e){throw console.error("Error fetching class session attendances:",e),e}}async function r(){try{let e=await (0,t.Qi)("admin_page/getOrders","GET");if("OK"===e.status&&e.orders)return e.orders;throw Error("Invalid response format or orders not found")}catch(e){throw console.error("Error fetching orders:",e),e}}async function n(){try{let e=await (0,t.Qi)("admin_page/getClassSessions","GET");if("OK"===e.status&&e.class_sessions)return{status:e.status,class_sessions:e.class_sessions};throw Error("Invalid response format or class sessions not found")}catch(e){throw console.error("Error fetching class sessions:",e),e}}async function l(e){try{console.log("[FETCH] getClassSessionData path:","admin_page/getClassSessionData/".concat(e));let s=await (0,t.Qi)("admin_page/getClassSessionData/".concat(e),"GET");if(console.log("[FETCH] getClassSessionData response:",s),"OK"===s.status&&s.session)return{status:s.status,session:s.session,course_packages:s.course_packages||[],course_package_classes:s.course_package_classes||[],courses:s.courses||[]};throw Error("Invalid response format or class session not found")}catch(e){throw console.error("Error fetching class session data:",e),e}}async function o(){try{let e=await (0,t.Qi)("admin_page/getUserSettings","GET");if("OK"===e.status&&e.user)return{status:e.status,user:e.user};throw Error("Invalid response format or user not found")}catch(e){throw console.error("Error fetching admin user settings:",e),e}}async function c(e){try{let s=await (0,t.Qi)("admin_page/updateUserSettings","POST",e);if("OK"===s.status)return{status:s.status,message:s.message||"Settings updated successfully"};throw Error("Failed to update user settings")}catch(e){throw console.error("Error updating admin user settings:",e),e}}async function d(e,s){try{let a="admin_page/setClassSessionAttendances/".concat(e),i={attendances:s.map(e=>({student_id:e}))};console.log("[FETCH] markAttendance path:",a),console.log("[FETCH] markAttendance body:",i);let r=await (0,t.Qi)(a,"POST",i);if(console.log("[FETCH] markAttendance response:",{status:r.status}),"OK"===r.status)return{status:r.status,message:r.message||"Attendance marked successfully"};throw Error("Failed to mark attendance")}catch(e){throw console.error("Error marking attendance:",e),e}}}},e=>{var s=s=>e(e.s=s);e.O(0,[3438,5281,2105,2092,978,6039,5033,3231,5616,1722,5022,5575,7358],()=>s(40433)),_N_E=e.O()}]);