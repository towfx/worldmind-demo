"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5616],{15616:(t,e,o)=>{o.d(e,{$v:()=>E,Em:()=>d,Ow:()=>S,P:()=>l,Qi:()=>u,TF:()=>m,W5:()=>A,vt:()=>g,vv:()=>y,yE:()=>f,yo:()=>h});let c="http://worldmind.api/api",a=()=>{try{let t=localStorage.getItem("login_info");if(!t)return null;let e=JSON.parse(t);return(null==e?void 0:e.token)||null}catch(t){return console.error("Error retrieving auth token:",t),null}},r=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let t={"Content-Type":"application/json",Accept:"application/json"},e=a();return e&&(t.Authorization="Bearer ".concat(e)),t},n=(t,e)=>{try{let o={...e};o.data&&delete o.data,localStorage.setItem("".concat(t,"_query_response_meta"),JSON.stringify(o))}catch(e){console.error("Failed to store metadata for ".concat(t,":"),e)}},s=t=>{if(!Array.isArray(t)||0===t.length)return"0 items";let e=t.length,o=t.map(t=>{let e=t.id||"no-id",o=t.name||t.title||t.email||"unnamed";return"{id:".concat(e,", ").concat(o,"}")}).join(", ");return"".concat(e," items: ").concat(o)},i=async t=>{let e=t.url.split("?")[0];if(!t.ok){let e="API Error: ".concat(t.status," ").concat(t.statusText);try{let o=await t.json();o.message&&(e=o.message)}catch(t){}throw Error(e)}let o=await t.json();if(o&&"object"==typeof o){if(Array.isArray(o))console.log("API Response [".concat(t.status,"] from ").concat(e,": ").concat(s(o)));else if(o.data&&Array.isArray(o.data))console.log("API Response [".concat(t.status,"] from ").concat(e,": ").concat(s(o.data)));else{let c=o.id||"no-id",a=o.name||o.title||o.email||"unnamed";console.log("API Response [".concat(t.status,"] from ").concat(e,": {id:").concat(c,", ").concat(a,"}"))}}return o},l=async function(t,e){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s="";e&&Object.keys(e).length>0&&(s="?"+new URLSearchParams(Object.entries(e).reduce((t,e)=>{let[o,c]=e;return null!=c&&(t[o]=String(c)),t},{})).toString());let l="".concat(c,"/services/").concat(t).concat(s);console.log("API Request [GET]: ".concat(t).concat(s?" with params":"")),console.log("Complete URL: ".concat(l));let u=a();console.log("Auth token exists: ".concat(!!u)),u&&console.log("Auth token first 10 chars: ".concat(u.substring(0,10),"..."));try{let e=r();console.log("Request headers:",e);let c=await fetch(l,{method:"GET",headers:e,credentials:"omit"});console.log("Response status:",c.status,c.statusText);let a=await i(c);if(a&&"object"==typeof a&&"data"in a)return n(t,a),o?a:a.data;return a}catch(e){throw console.error("Failed to query ".concat(t,": ").concat(e instanceof Error?e.message:String(e))),Error("Failed to query ".concat(t,": ").concat(e instanceof Error?e.message:String(e)))}},u=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2?arguments[2]:void 0,n="".concat(c,"/").concat(t);console.log("API Request [".concat(e,"]: ").concat(t)),console.log("Complete URL: ".concat(n));let s=a();console.log("Auth token exists: ".concat(!!s)),s&&console.log("Auth token first 10 chars: ".concat(s.substring(0,10),"..."));try{let t=r();console.log("Request headers:",t);let c={method:e,headers:t,credentials:"omit"};["POST","PUT","PATCH"].includes(e)&&o&&(c.body=JSON.stringify(o));let a=await fetch(n,c);return console.log("Response status:",a.status,a.statusText),i(a)}catch(e){throw console.error("Failed to query ".concat(t,": ").concat(e instanceof Error?e.message:String(e))),Error("Failed to query ".concat(t,": ").concat(e instanceof Error?e.message:String(e)))}},d=async(t,e,o)=>{let a="".concat(c,"/").concat(t);console.log("API Request [".concat(e,"]: ").concat(t));try{let t={method:e,headers:r(),credentials:"omit"};["POST","PUT","PATCH"].includes(e)&&o&&(t.body=JSON.stringify(o));let c=await fetch(a,t);return i(c)}catch(o){throw console.error("Failed to ".concat(e," ").concat(t,": ").concat(o instanceof Error?o.message:String(o))),Error("Failed to ".concat(e," ").concat(t,": ").concat(o instanceof Error?o.message:String(o)))}},g=async(t,e)=>{let o="".concat(c,"/services/").concat(t);console.log("API Request [POST]: ".concat(t));try{let t=await fetch(o,{method:"POST",headers:r(),body:JSON.stringify(e),credentials:"omit"});return i(t)}catch(e){throw console.error("Failed to create record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e))),Error("Failed to create record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e)))}},h=async(t,e,o)=>{let a="".concat(c,"/services/").concat(t,"/").concat(e);console.log("API Request [PUT]: ".concat(t,"/").concat(e));try{let t=await fetch(a,{method:"PUT",headers:r(),body:JSON.stringify(o),credentials:"omit"});return i(t)}catch(e){throw console.error("Failed to update record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e))),Error("Failed to update record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e)))}},m=async(t,e)=>{let o="".concat(c,"/services/").concat(t,"/").concat(e);console.log("API Request [DELETE]: ".concat(t,"/").concat(e));try{let t=await fetch(o,{method:"DELETE",headers:r(),credentials:"omit"});return i(t)}catch(e){throw console.error("Failed to delete record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e))),Error("Failed to delete record in ".concat(t,": ").concat(e instanceof Error?e.message:String(e)))}},p=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.startsWith("http")?t:"".concat(c,"/").concat(t.startsWith("/")?t.slice(1):t);console.log("API Request [".concat(e.method||"GET","]: ").concat(t.split("?")[0]));let a={headers:r(),credentials:"omit"};try{let t=await fetch(o,{...a,...e});return i(t)}catch(t){throw console.error("API call failed: ".concat(t instanceof Error?t.message:String(t))),Error("API call failed: ".concat(t instanceof Error?t.message:String(t)))}},f=t=>{if(!t.purchasable)return"<span>".concat(t.item_type,"</span>");let{name:e,title:o,description:c}=t.purchasable;return"App\\Models\\Course"===t.item_type?"<h4>".concat(o||"Course","</h4><p>").concat(c||"","</p>"):"App\\Models\\CoursePackage"===t.item_type?"<h5>".concat(e||"Package","</h5><p>").concat(c||"","</p>"):"App\\Models\\CoursePackageClass"===t.item_type?"<h6>".concat(o||"Class","</h6><p>").concat(c||"","</p>"):"<span>".concat(e||o||t.item_type,"</span>")},y=t=>{if(null==t)return"0.00";let e="number"==typeof t?t:Number.parseFloat(t);return isNaN(e)?"0.00":e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},E=t=>{if(Array.isArray(t))return t;try{let e=t.replace(/\\"/g,'"'),o=JSON.parse(e);if(Array.isArray(o))return o}catch(t){console.error("Failed to parse value:",t)}return[]},A=(t,e)=>t.length<=e?t:t.slice(0,e)+"...",S=t=>t.toISOString().slice(0,19).replace("T"," ")}}]);